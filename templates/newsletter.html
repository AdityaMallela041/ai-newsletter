<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ newsletter_title }}</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            line-height: 1.6;
            color: #1a1a1a;
            background: #f4f4f4;
        }
        
        .email-wrapper {
            width: 100%;
            background: #f4f4f4;
            padding: 20px 0;
        }
        
        .email-container {
            max-width: 680px;
            margin: 0 auto;
            background: #fff;
            border-radius: 0;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        
        /* BLACK HEADER BANNER */
        .header-banner {
            background: #000;
            padding: 40px 32px;  /* INCREASED padding */
            text-align: center;
        }
        
        .header-logo {
            font-size: 32px;
            font-weight: 900;
            color: #fff;
            margin-bottom: 8px;
            letter-spacing: -1px;
        }
        
        .header-tagline {
            font-size: 14px;
            color: #999;
            font-weight: 500;
        }
        
        .header-date {
            font-size: 13px;
            color: #666;
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid #333;
        }
        
        /* GREETING & SUMMARY - MORE SPACING */
        .greeting {
            padding: 40px 32px;  /* INCREASED from 32px */
            background: #fff;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .greeting-text {
            font-size: 16px;
            color: #1a1a1a;
            line-height: 1.8;
            margin-bottom: 24px;  /* INCREASED from 20px */
        }
        
        .greeting-text strong {
            font-weight: 700;
        }
        
        .dynamic-summary {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 28px;  /* INCREASED from 24px */
            border-radius: 8px;
            margin-top: 24px;  /* INCREASED from 20px */
        }
        
        .summary-heading {
            font-size: 17px;
            font-weight: 800;
            color: #1a1a1a;
            margin-bottom: 20px;  /* INCREASED from 16px */
        }
        
        .headline-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .headline-item {
            font-size: 15px;
            color: #374151;
            margin-bottom: 12px;  /* INCREASED from 10px */
            position: relative;
            line-height: 1.7;
            display: flex;
            align-items: flex-start;
        }
        
        .headline-item::before {
            content: "â€¢";
            color: #667eea;
            font-weight: 900;
            font-size: 20px;
            margin-right: 12px;
            flex-shrink: 0;
            line-height: 1.7;
        }
        
        /* SECTION HEADERS - MORE SPACING */
        .section-header {
            background: #1a1a1a;
            color: #fff;
            padding: 18px 32px;  /* INCREASED from 16px */
            font-size: 13px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            margin-top: 48px;  /* INCREASED from 32px */
        }
        
        /* ARTICLE CARDS - MORE SPACING */
        .article-card {
            margin: 40px 32px;  /* INCREASED from 32px */
            border-radius: 12px;
            overflow: hidden;
            background: #fff;
            box-shadow: 0 2px 12px rgba(0,0,0,0.06);
            transition: transform 0.3s, box-shadow 0.3s;
            border: 1px solid #e5e7eb;
        }
        
        .article-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0,0,0,0.12);
        }
        
        .article-image-wrapper {
            width: 100%;
            height: 0;
            padding-bottom: 56.25%;
            position: relative;
            overflow: hidden;
            background: #f3f4f6;
        }
        
        .article-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .video-wrapper {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            background: #000;
        }
        
        .video-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }
        
        .article-content {
            padding: 28px;  /* INCREASED from 24px */
        }
        
        .article-source {
            display: inline-block;
            background: #667eea;
            color: #fff;
            font-size: 11px;
            font-weight: 800;
            text-transform: uppercase;
            padding: 6px 14px;
            border-radius: 50px;
            margin-bottom: 16px;
            letter-spacing: 0.8px;
        }
        
        .article-title {
            font-size: 21px;
            font-weight: 800;
            color: #1a1a1a;
            margin-bottom: 16px;  /* INCREASED from 12px */
            line-height: 1.3;
            letter-spacing: -0.3px;
        }
        
        .article-title a {
            color: #1a1a1a;
            text-decoration: none;
        }
        
        .article-title a:hover {
            color: #667eea;
        }
        
        .article-summary {
            font-size: 16px;
            color: #4b5563;
            line-height: 1.8;
            margin-bottom: 20px;  /* INCREASED from 16px */
            white-space: pre-line;
        }
        
        .article-summary strong {
            display: block;
            color: #1a1a1a;
            font-weight: 700;
            font-size: 15px;
            margin-top: 16px;  /* INCREASED from 12px */
            margin-bottom: 10px;  /* INCREASED from 8px */
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .article-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 16px;
            border-top: 1px solid #e5e7eb;
        }
        
        .article-date {
            font-size: 13px;
            color: #9ca3af;
            font-weight: 600;
        }
        
        .read-more {
            color: #667eea;
            font-size: 14px;
            font-weight: 700;
            text-decoration: none;
        }
        
        .read-more:hover {
            text-decoration: underline;
        }
        
        /* TRENDING TOOLS SECTION - CLEANER */
        .tools-section {
            background: #fff;  /* CHANGED from #f8f9fa */
            padding: 0;  /* REMOVED padding */
            margin: 48px 0 0 0;  /* INCREASED top margin */
        }
        
        .tools-title {
            font-size: 20px;
            font-weight: 800;
            color: #1a1a1a;
            margin-bottom: 24px;
            padding: 32px 32px 0 32px;  /* ADDED padding only to title */
        }
        
        .tools-list {
            list-style: none;
            padding: 0 32px 32px 32px;  /* UPDATED padding */
            margin: 0;
        }
        
        .tool-item {
            background: #f8f9fa;  /* LIGHTER background */
            padding: 20px 24px;  /* INCREASED padding */
            margin-bottom: 16px;  /* INCREASED from 12px */
            border-radius: 8px;
            border-left: 4px solid #667eea;
            box-shadow: 0 2px 6px rgba(0,0,0,0.04);
            transition: all 0.3s;  /* ADDED */
        }
        
        .tool-item:hover {
            background: #fff;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            transform: translateX(4px);
        }
        
        .tool-name {
            font-size: 16px;
            font-weight: 700;
            color: #1a1a1a;
            text-decoration: none;
            display: block;
            margin-bottom: 8px;  /* INCREASED from 6px */
        }
        
        .tool-name:hover {
            color: #667eea;
        }
        
        .tool-description {
            font-size: 14px;
            color: #6b7280;
            line-height: 1.7;  /* INCREASED from 1.6 */
        }
        
        /* FEEDBACK SECTION - CLEAN, NO GRADIENT */
        .feedback {
            background: #f8f9fa;
            padding: 56px 32px;
            text-align: center;
            margin-top: 56px;
            border-top: 3px solid #667eea;
        }

        .feedback h3 {
            font-size: 28px;
            font-weight: 800;
            color: #1a1a1a;
            margin-bottom: 12px;
        }

        .feedback-subtitle {
            font-size: 16px;
            color: #6b7280;
            margin-bottom: 40px;
        }

        /* STAR RATING WRAPPER */
        .star-rating-wrapper {
            display: inline-block;
        }

        .star-rating {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin-bottom: 20px;
        }

        .star-link {
            text-decoration: none;
            font-size: 56px;  /* Large stars */
            color: #d1d5db;  /* Gray by default */
            transition: all 0.3s ease;
            cursor: pointer;
            display: inline-block;
            line-height: 1;
        }

        .star-link:hover {
            transform: scale(1.15);
        }

        /* RATING LABEL */
        .rating-label {
            font-size: 16px;
            color: #9ca3af;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            transition: all 0.3s ease;
            min-height: 24px;  /* Prevent layout shift */
        }

        /* RESPONSIVE */
        @media only screen and (max-width: 600px) {
            .star-link {
                font-size: 44px;
                gap: 8px;
            }
            
            .feedback {
                padding: 40px 20px;
            }
        }


        /* FOOTER */
        .footer {
            background: #1a1a1a;
            color: #cbd5e0;
            padding: 40px 32px;  /* INCREASED from 32px */
            text-align: center;
        }
        
        .footer-brand {
            font-size: 20px;
            font-weight: 800;
            color: #fff;
            margin-bottom: 12px;
        }
        
        .footer p {
            font-size: 14px;
            margin-bottom: 8px;
        }
        
        .footer-links {
            margin: 24px 0;  /* INCREASED from 20px */
            padding: 20px 0;  /* INCREASED from 16px */
            border-top: 1px solid rgba(255,255,255,0.1);
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .footer-links a {
            color: #667eea;
            text-decoration: none;
            margin: 0 12px;
            font-weight: 600;
        }
        
        .footer-links a:hover {
            color: #fff;
        }
        
        /* RESPONSIVE */
        @media only screen and (max-width: 600px) {
            .email-container {
                border-radius: 0;
            }
            
            .header-banner, .greeting, .article-content, .tools-section, .feedback, .footer {
                padding-left: 20px;
                padding-right: 20px;
            }
            
            .article-card {
                margin: 30px 20px;
            }
            
            .article-title {
                font-size: 19px;
            }
            
            .rating-buttons {
                gap: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="email-wrapper">
        <div class="email-container">
            
            <!-- BLACK HEADER BANNER -->
            <div class="header-banner">
                <div class="header-logo">ðŸ¤– CSE(AI&ML) Weekly Newsletter</div>
                <div class="header-tagline">Your Weekly AI & ML Update from Department of CSE (AI & ML)</div>
                <div class="header-date">{{ current_date }}</div>
            </div>
            
            <!-- GREETING & DYNAMIC SUMMARY -->
            <div class="greeting">
                <p class="greeting-text">Good {{ time_of_day }}, <strong>{{ recipient_name }}</strong>. ðŸ‘‹</p>
                
                <div class="dynamic-summary">
                    <p style="font-size: 16px; line-height: 1.8; color: #374151; margin-bottom: 20px;">
                        This week in AI & Machine Learning: From breakthrough research to cutting-edge tools, here's everything you need to know to stay ahead in the rapidly evolving AI landscape.
                    </p>
                    
                    <p class="summary-heading">ðŸ“° In today's edition:</p>
                    <ul class="headline-list">
                        {% if development %}
                        <li class="headline-item">{{ development.title }}</li>
                        {% endif %}
                        {% if training %}
                        <li class="headline-item">{{ training.title }}</li>
                        {% endif %}
                        {% if research %}
                        <li class="headline-item">{{ research.title }}</li>
                        {% endif %}
                        {% if trending_tools %}
                        <li class="headline-item">{{ trending_tools|length }} trending AI tools to explore</li>
                        {% endif %}
                        {% if startup %}
                        <li class="headline-item">{{ startup.title }}</li>
                        {% endif %}
                    </ul>
                </div>
            </div>
            
            <!-- LATEST DEVELOPMENTS -->
            {% if development %}
            <div class="section-header">ðŸ“ˆ LATEST DEVELOPMENTS</div>
            <div class="article-card">
                {% if development.video_id %}
                <div class="video-wrapper">
                    <iframe src="https://www.youtube.com/embed/{{ development.video_id }}" allowfullscreen></iframe>
                </div>
                {% elif development.image %}
                <div class="article-image-wrapper">
                    <img src="{{ development.image }}" alt="{{ development.title }}" class="article-image">
                </div>
                {% endif %}
                
                <div class="article-content">
                    <span class="article-source">{{ development.source }}</span>
                    <h2 class="article-title">
                        <a href="{{ development.link }}" target="_blank">{{ development.title }}</a>
                    </h2>
                    <p class="article-summary">{{ development.summary }}</p>
                    <div class="article-meta">
                        <span class="article-date">{{ development.published_date }}</span>
                        <a href="{{ development.link }}" class="read-more" target="_blank">Read more â†’</a>
                    </div>
                </div>
            </div>
            {% endif %}
            
            <!-- AI TRAINING -->
            {% if training %}
            <div class="section-header">ðŸŽ“ AI TRAINING</div>
            <div class="article-card">
                {% if training.video_id %}
                <div class="video-wrapper">
                    <iframe src="https://www.youtube.com/embed/{{ training.video_id }}" allowfullscreen></iframe>
                </div>
                {% elif training.image %}
                <div class="article-image-wrapper">
                    <img src="{{ training.image }}" alt="{{ training.title }}" class="article-image">
                </div>
                {% endif %}
                
                <div class="article-content">
                    <span class="article-source">{{ training.source }}</span>
                    <h2 class="article-title">
                        <a href="{{ training.link }}" target="_blank">{{ training.title }}</a>
                    </h2>
                    <p class="article-summary">{{ training.summary }}</p>
                    <div class="article-meta">
                        <span class="article-date">{{ training.published_date }}</span>
                        <a href="{{ training.link }}" class="read-more" target="_blank">Read more â†’</a>
                    </div>
                </div>
            </div>
            {% endif %}
            
            <!-- AI RESEARCH -->
            {% if research %}
            <div class="section-header">ðŸ”¬ AI RESEARCH</div>
            <div class="article-card">
                {% if research.video_id %}
                <div class="video-wrapper">
                    <iframe src="https://www.youtube.com/embed/{{ research.video_id }}" allowfullscreen></iframe>
                </div>
                {% elif research.image %}
                <div class="article-image-wrapper">
                    <img src="{{ research.image }}" alt="{{ research.title }}" class="article-image">
                </div>
                {% endif %}
                
                <div class="article-content">
                    <span class="article-source">{{ research.source }}</span>
                    <h2 class="article-title">
                        <a href="{{ research.link }}" target="_blank">{{ research.title }}</a>
                    </h2>
                    <p class="article-summary">{{ research.summary }}</p>
                    <div class="article-meta">
                        <span class="article-date">{{ research.published_date }}</span>
                        <a href="{{ research.link }}" class="read-more" target="_blank">Read more â†’</a>
                    </div>
                </div>
            </div>
            {% endif %}
            
            <!-- TRENDING AI TOOLS WITH BLACK BANNER -->
            {% if trending_tools %}
            <div class="section-header">ðŸ”§ TRENDING AI TOOLS</div>
            <div class="tools-section">
                <ul class="tools-list">
                    {% for tool in trending_tools %}
                    <li class="tool-item">
                        <a href="{{ tool.link }}" class="tool-name" target="_blank">{{ tool.name }}</a>
                        <p class="tool-description">{{ tool.description }}</p>
                    </li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}
            
            <!-- AI STARTUPS -->
            {% if startup %}
            <div class="section-header">ðŸš€ NEW AI STARTUPS</div>
            <div class="article-card">
                {% if startup.video_id %}
                <div class="video-wrapper">
                    <iframe src="https://www.youtube.com/embed/{{ startup.video_id }}" allowfullscreen></iframe>
                </div>
                {% elif startup.image %}
                <div class="article-image-wrapper">
                    <img src="{{ startup.image }}" alt="{{ startup.title }}" class="article-image">
                </div>
                {% endif %}
                
                <div class="article-content">
                    <span class="article-source">{{ startup.source }}</span>
                    <h2 class="article-title">
                        <a href="{{ startup.link }}" target="_blank">{{ startup.title }}</a>
                    </h2>
                    <p class="article-summary">{{ startup.summary }}</p>
                    <div class="article-meta">
                        <span class="article-date">{{ startup.published_date }}</span>
                        <a href="{{ startup.link }}" class="read-more" target="_blank">Read more â†’</a>
                    </div>
                </div>
            </div>
            {% endif %}
            
            <!-- FEEDBACK SECTION - INTERACTIVE WITH COLORS & LABELS -->
            <div class="feedback">
                <h3>ðŸ’­ We Value Your Feedback</h3>
                <p class="feedback-subtitle">How would you rate today's newsletter?</p>
                
                <div class="star-rating-wrapper">
                    <div class="star-rating" id="starRating">
                        <a href="{{ feedback_url }}?newsletter_id={{ newsletter_id }}&rating=1" 
                        class="star-link" 
                        data-rating="1" 
                        data-label="Very Poor"
                        onmouseover="hoverStars(1)" 
                        onmouseout="resetStars()">â˜…</a>
                        <a href="{{ feedback_url }}?newsletter_id={{ newsletter_id }}&rating=2" 
                        class="star-link" 
                        data-rating="2" 
                        data-label="Poor"
                        onmouseover="hoverStars(2)" 
                        onmouseout="resetStars()">â˜…</a>
                        <a href="{{ feedback_url }}?newsletter_id={{ newsletter_id }}&rating=3" 
                        class="star-link" 
                        data-rating="3" 
                        data-label="Average"
                        onmouseover="hoverStars(3)" 
                        onmouseout="resetStars()">â˜…</a>
                        <a href="{{ feedback_url }}?newsletter_id={{ newsletter_id }}&rating=4" 
                        class="star-link" 
                        data-rating="4" 
                        data-label="Good"
                        onmouseover="hoverStars(4)" 
                        onmouseout="resetStars()">â˜…</a>
                        <a href="{{ feedback_url }}?newsletter_id={{ newsletter_id }}&rating=5" 
                        class="star-link" 
                        data-rating="5" 
                        data-label="Excellent"
                        onmouseover="hoverStars(5)" 
                        onmouseout="resetStars()">â˜…</a>
                    </div>
                    <p class="rating-label" id="ratingLabel">Click to rate</p>
                </div>
                
                <script>
                    function hoverStars(rating) {
                        const stars = document.querySelectorAll('.star-link');
                        const label = document.getElementById('ratingLabel');
                        
                        // Color mapping: 1=red, 2=orange, 3=yellow, 4=blue, 5=green
                        const colors = {
                            1: '#ef4444',  // Red
                            2: '#f97316',  // Orange
                            3: '#fbbf24',  // Yellow
                            4: '#3b82f6',  // Blue
                            5: '#10b981'   // Green
                        };
                        
                        const labels = {
                            1: 'Very Poor',
                            2: 'Poor',
                            3: 'Average',
                            4: 'Good',
                            5: 'Excellent'
                        };
                        
                        // Fill stars up to rating
                        stars.forEach((star, index) => {
                            if (index < rating) {
                                star.style.color = colors[rating];
                                star.style.transform = 'scale(1.15)';
                            } else {
                                star.style.color = '#d1d5db';
                                star.style.transform = 'scale(1)';
                            }
                        });
                        
                        // Update label
                        label.textContent = labels[rating];
                        label.style.color = colors[rating];
                        label.style.fontWeight = '700';
                    }
                    
                    function resetStars() {
                        const stars = document.querySelectorAll('.star-link');
                        const label = document.getElementById('ratingLabel');
                        
                        stars.forEach(star => {
                            star.style.color = '#d1d5db';
                            star.style.transform = 'scale(1)';
                        });
                        
                        label.textContent = 'Click to rate';
                        label.style.color = '#9ca3af';
                        label.style.fontWeight = '600';
                    }
                </script>
            </div>

            <!-- FOOTER -->
            <div class="footer">
                <div class="footer-brand">CSE(AI&ML) Newsletter</div>
                <p>Delivered weekly every Friday at 4 PM IST</p>
                <p>Department of Computer Science & Engineering (AI & ML)</p>
                
                <div class="footer-links">
                    <a href="{{ unsubscribe_url }}">Unsubscribe</a>
                    <a href="{{ preferences_url }}">Preferences</a>
                    <a href="{{ archive_url }}">Archive</a>
                </div>
                
                <p style="font-size: 13px; color: #718096; margin-top: 16px;">Â© {{ year }} - All rights reserved</p>
            </div>
            
        </div>
    </div>
</body>
</html>
